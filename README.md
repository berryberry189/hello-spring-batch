# hello-spring-batch

## 배치 프로그램

정해진 시간에 일괄적으로 작업을 처리하는 것 ⇒ 대체로 대용량 데이터

### 필요한 상황

1. 필요한 데이터를 모아서 처리해야 할때 : 월별 거래 명세서 생성
2. 일부러 지연시켜서 처리할때 : 주문한 상품을 바로 처리하지 않고 일정 시간 뒤에 처리할 때
3. 자원을 효율적으로 활용하기 위해 : 트래픽이 적은 시간대에 서버 리소스를 활용

#### 데이터 처리 배치 프로그램 관점

1. 각 서비스의 데이터를 데이터 웨어하우스에 저장할 때
2. 아마존에서 연관상품을 추천하는 것처럼 데이터 모델을 만들 때
3. 유저의 리텐션 등 마게팅에 참고할 데이터 지표를 집계할 때

#### 서비스 배치 프로그램 관점

1. 메시지, 이메일, 푸시 등을 발송할 때
2. 데이터를 마이그레이션 할 때
3. 실패한 트랜잭션을 재처리할 때
4. 쿠폰, 포인트 등이 만료되었을 때 소진시키는 처리를 할 때
5. 월말 또는 월초에 특정 데이터를 생성할 때 : 월별 거래 명세서

### 스프링 배치를 사용하는 이유

- 스프링으로 작성된 코드를 재활용할 수 있으며, 기존 spring 프로젝트의 코드를 활용하거나 모듈을 이용할 수 있음
- 다양한 기능 제공
    - 로깅/추적, 트랜잭션 관리, 직업 처리 통계, 재시작, 건너뛰기 등 대용량 처리에 필수적인 기능들을 제공
    - 멀티 코어 또는 멀티 서버에서 처리를 분산하는 기능을 제공


## 스프링 배치 아키택처

- JobLauncher는 Job을 실행시키는 컴포넌트
- Job은 배치작업을 의미, JobRepository는 Job의 실행과 Job,Step을 저장
- Step은 배치의 작업 단계 ( Job : Step → 1 : N )
    - ItemReader(읽기), ItemProcessor(가공), ItemWriter(쓰기)는 데이터를 읽고 처리하고 쓰는 구성( 각각 1개씩만 갖을 수 있다)
